/**
 * Hibiscus üå∫ - Internationalization Module
 * Suporte a m√∫ltiplos idiomas (PT/EN/ES)
 */

const translations = {
    pt: {
        // Setup Modal
        'setup.title': 'Bem-vindo ao Hibiscus',
        'setup.welcome': 'Configure seu idioma e API para come√ßar',
        'setup.language': 'Idioma',
        'setup.apiKey': 'Chave de API',
        'setup.apiKeyHint': 'Para maiores limites, obtenha em enter.pollinations.ai',
        'setup.start': 'Come√ßar',
        // Navigation
        'nav.generateImage': 'Gerar Imagem',
        'nav.editImage': 'Editar Imagem',
        'nav.generateVideo': 'Gerar V√≠deo',
        'nav.gallery': 'Galeria',
        'nav.settings': 'Configura√ß√µes',
        // Image Generation
        'image.title': 'Gera√ß√£o de Imagens',
        'image.subtitle': 'Crie imagens incr√≠veis com IA',
        'image.prompt': 'Prompt',
        'image.promptPlaceholder': 'Descreva a imagem que voc√™ quer criar...',
        'image.negativePrompt': 'Prompt Negativo',
        'image.negativePromptPlaceholder': 'O que evitar na imagem...',
        'image.model': 'Modelo',
        'image.quality': 'Qualidade (apenas GPT)',
        'image.qualityLow': 'Baixa',
        'image.qualityMedium': 'M√©dia',
        'image.qualityHigh': 'Alta',
        'image.qualityHD': 'HD',
        'image.aspectRatio': 'Propor√ß√£o',
        'image.width': 'Largura',
        'image.height': 'Altura',
        'image.seed': 'Seed',
        'image.seedRandom': '-1 para aleat√≥rio',
        'image.guidance': 'Guidance Scale',
        'image.resolutionMultiplier': 'Multiplicador de Resolu√ß√£o',
        'image.resolutionMultiplier': 'Multiplicador de Resolu√ß√£o',
        'image.resolutionWarning': '‚ö†Ô∏è Alguns modelos podem n√£o suportar essa resolu√ß√£o',
        'image.resNormal': 'Qualidade Normal',
        'image.resHD': 'Qualidade HD (2x)',
        'image.resUltra': 'Ultra HD (4x)',
        'image.enhance': 'Melhorar prompt com IA',
        'image.transparent': 'Fundo transparente (apenas GPT)',
        'image.noLogo': 'Sem marca d\'√°gua',
        'image.safeFilter': 'Filtro de seguran√ßa',
        'image.generate': 'Gerar Imagem',
        'image.generating': 'Gerando imagem...',
        'image.placeholder': 'Sua imagem aparecer√° aqui',
        // Image Editing
        'edit.title': 'Edi√ß√£o de Imagens',
        'edit.subtitle': 'Modifique imagens existentes com IA (suporta m√∫ltiplas imagens)',
        'edit.refImages': 'Imagens de Refer√™ncia (suporta m√∫ltiplas)',
        'edit.urlPlaceholder': 'Cole URL e pressione Enter, ou fa√ßa upload',
        'edit.hint': 'Voc√™ pode adicionar v√°rias imagens. URLs s√£o processadas mais r√°pido.',
        'edit.clearAll': '‚úï Limpar Todas',
        'edit.promptLabel': 'Prompt de Edi√ß√£o',
        'edit.promptPlaceholder': 'Descreva as modifica√ß√µes que voc√™ quer fazer...',
        'edit.apply': 'Aplicar Edi√ß√£o',
        'edit.applying': 'Aplicando edi√ß√£o...',
        'edit.placeholder': 'O resultado da edi√ß√£o aparecer√° aqui',
        'edit.continue': 'Continuar Editando',
        // Video Generation
        'video.title': 'Gera√ß√£o de V√≠deos',
        'video.subtitle': 'Crie v√≠deos incr√≠veis com IA',
        'video.prompt': 'Prompt',
        'video.promptPlaceholder': 'Descreva o v√≠deo que voc√™ quer criar...',
        'video.model': 'Modelo',
        'video.refImage': 'Imagem de Refer√™ncia (Opcional)',
        'video.refImagePlaceholder': 'URL da imagem inicial (para Seedance)',
        'video.duration': 'Dura√ß√£o (segundos)',
        'video.seconds': 'segundos',
        'video.aspectRatio': 'Propor√ß√£o',
        'video.landscape': 'Paisagem',
        'video.portrait': 'Retrato',
        'video.audio': 'Gerar √°udio (apenas Veo)',
        'video.enhance': 'Melhorar prompt com IA',
        'video.generate': 'Gerar V√≠deo',
        'video.generating': 'Gerando v√≠deo...',
        'video.generatingHint': 'Isso pode levar alguns minutos',
        'video.placeholder': 'Seu v√≠deo aparecer√° aqui',
        'video.placeholderHint': 'V√≠deos podem levar alguns minutos para gerar',
        // Gallery
        'gallery.title': 'Galeria',
        'gallery.subtitle': 'Suas cria√ß√µes organizadas por data',
        'gallery.all': 'Todos',
        'gallery.images': 'Imagens',
        'gallery.videos': 'V√≠deos',
        'gallery.downloadAll': 'Download Todos',
        'gallery.clear': 'Limpar',
        'gallery.empty': 'Nenhuma cria√ß√£o ainda',
        'gallery.emptyHint': 'Gere imagens ou v√≠deos para v√™-los aqui',
        'gallery.confirmClear': 'Tem certeza que deseja limpar toda a galeria?',
        'gallery.confirmDelete': 'Tem certeza que deseja excluir este item?',
        // Settings
        'settings.title': 'Configura√ß√µes',
        'settings.subtitle': 'Configure sua experi√™ncia',
        'settings.apiKey': 'Chave de API',
        'settings.apiKeyHint': 'Obtenha sua chave em',
        'settings.saveKey': 'Salvar Chave',
        'settings.autoDownload': 'Auto-Download',
        'settings.autoDownloadEnable': 'Ativar download autom√°tico',
        'settings.autoDownloadHint': 'Baixa automaticamente todas as cria√ß√µes',
        'settings.downloadPath': 'Pasta de Download',
        'settings.downloadPathHint': 'As subpastas ser√£o criadas por data',
        'settings.filenameFormat': 'Formato do Nome',
        'settings.filenamePrompt': 'Prompt resumido',
        'settings.filenameTimestamp': 'Timestamp',
        'settings.filenameBoth': 'Prompt + Timestamp',
        'settings.mediaDir': 'Diret√≥rio de M√≠dia',
        'settings.useCustomDir': 'Usar diret√≥rio personalizado',
        'settings.mediaDirHint': 'Por padr√£o, usa a pasta da galeria do aplicativo',
        'settings.customDir': 'Pasta Personalizada',
        'settings.browse': 'Procurar',
        'settings.dirSelected': 'Diret√≥rio selecionado',
        'settings.dirReset': 'Usando diret√≥rio padr√£o',
        'settings.language': 'Idioma',
        'settings.theme': 'Tema',
        'settings.themeDark': 'Escuro',
        'settings.themeLight': 'Claro',
        'settings.stats': 'Estat√≠sticas',
        'settings.imagesGenerated': 'Imagens Geradas',
        'settings.videosGenerated': 'V√≠deos Gerados',
        'settings.downloads': 'Downloads',
        'settings.logs': 'Logs de Sistema',
        'settings.logsRefresh': 'Atualizar',
        'settings.logsExport': 'Exportar',
        'settings.logsClear': 'Limpar',
        'settings.logsEmpty': 'Nenhum log registrado',
        'settings.logsConfirmClear': 'Limpar todos os logs?',
        'settings.logsAll': 'Todos',
        'settings.logsInfo': 'Info',
        'settings.logsWarn': 'Avisos',
        'settings.logsError': 'Erros',
        // Toasts & Messages
        'toast.safetyRetry': 'Filtro de seguran√ßa detectado ({failures} falhas). Tentativa {current}... Aguarde ou cancele.',
        'toast.safetyCancel': 'Gera√ß√£o cancelada pelo usu√°rio',
        'toast.cancelled': 'Cancelado',
        'toast.safetySuccess': 'Imagem gerada ap√≥s {attempts} tentativas!',
        'toast.serverError': 'Modelo {model} indispon√≠vel. Tente outro modelo.',
        'toast.safetyBlocked': 'Conte√∫do bloqueado pelo filtro de seguran√ßa.',
        // Job Queue
        'jobs.active': 'Gera√ß√µes Ativas',
        'jobs.pending': 'Na fila',
        'jobs.running': 'Gerando...',
        'jobs.retry': 'Retry {current}/{max}',
        'jobs.failed': 'Falhou',
        'jobs.blockedByFilter': 'Bloqueado pelo filtro',
        // Error Messages (User-Friendly)
        'error.serverUnavailable': 'Modelo {model} indispon√≠vel no momento. Tente outro modelo.',
        'error.serverGeneric': 'Erro no servidor. Tente novamente em alguns instantes.',
        'error.safetyBlocked': 'Conte√∫do bloqueado pelo filtro de seguran√ßa.',
        'error.authRequired': 'Chave de API inv√°lida ou n√£o configurada.',
        'error.insufficientBalance': 'Saldo insuficiente. Adicione cr√©ditos em enter.pollinations.ai',
        'error.rateLimit': 'Muitas requisi√ß√µes. Aguarde um momento.',
        'error.timeout': 'Tempo limite excedido. Tente novamente.',
        'error.network': 'Erro de conex√£o. Verifique sua internet.',
        'toast.generating': 'Gerando...',
        'toast.success': 'Sucesso!',
        'toast.error': 'Erro',
        'toast.networkError': 'Erro de rede, tentando novamente ({attempt}/{max})...',
        'toast.balanceError': 'Saldo insuficiente para usar este modelo',
        'toast.balanceErrorHint': 'Adicione cr√©ditos em enter.pollinations.ai para continuar gerando',
        'toast.authError': 'Chave de API necess√°ria',
        'toast.authErrorHint': 'Insira sua chave de API nas Configura√ß√µes para usar este modelo',
        'toast.dismissIn': 'Clique em qualquer lugar ou pressione qualquer tecla para fechar ({seconds}s)',
        'toast.enterPrompt': 'Digite um prompt para gerar',
        'toast.imageSuccess': 'Imagem gerada com sucesso!',
        'toast.editSuccess': 'Edi√ß√£o aplicada com sucesso!',
        'toast.videoSuccess': 'V√≠deo gerado com sucesso!',
        'toast.downloadSuccess': 'Download conclu√≠do!',
        'toast.noImage': 'Nenhuma imagem para baixar',
        'toast.noVideo': 'Nenhum v√≠deo para baixar',
        'toast.uploadingImages': 'Fazendo upload das imagens...',
        'toast.provideImage': 'Forne√ßa ao menos uma imagem de refer√™ncia',
        'toast.invalidUrl': 'Cole uma URL v√°lida (http/https)',
        'toast.imageError': 'Erro ao gerar imagem: {error}',
        'toast.editError': 'Erro ao editar imagem: {error}',
        'toast.videoError': 'Erro ao gerar v√≠deo: {error}',
        'toast.imageTooLarge': 'Imagem muito grande. Use uma imagem menor ou forne√ßa uma URL.',
        'toast.uploadingImage': 'Enviando imagem...',
        'toast.processingImage': 'Processando imagem {current}/{total}...',
        'toast.uploadServicesFailed': 'Falha no upload. Todos os servi√ßos falharam.',
        'toast.safetyRetriesExhausted': 'Falha ap√≥s {max} tentativas do filtro de seguran√ßa',
        'toast.noImageToUpload': 'Nenhuma imagem para fazer upload',
        'toast.imageUploadFailed': 'Falha ao enviar imagem. Use uma URL externa.',
        'toast.enterEditPrompt': 'Digite um prompt para a edi√ß√£o',
        'toast.enterVideoPrompt': 'Digite um prompt para gerar o v√≠deo',
        'toast.nothingToDownload': 'Nenhum item para baixar',
        'toast.allDownloaded': 'Todos os itens foram baixados!',
        'toast.galleryCleared': 'Galeria limpa',
        'toast.onlyImagesEdit': 'Apenas imagens podem ser editadas',
        'toast.loadImageError': 'Erro ao carregar imagem',
        'toast.fileNotAvailable': 'Arquivo n√£o dispon√≠vel',
        'toast.apiKeySaved': 'API Key salva!',
        'toast.logsExported': 'Logs exportados!',
        'toast.logsCleared': 'Logs limpos',
        // Buttons
        'btn.cancel': 'Cancelar',
        'btn.download': 'Download',
        'btn.edit': 'Editar',
        'btn.regenerate': 'Regenerar',
        'btn.upload': 'Upload',
        'btn.add': 'Adicionar',
        'btn.delete': 'Excluir',
        // Auto-download status
        'status.autoDownloadOn': 'Auto-download: ON',
        'status.autoDownloadOff': 'Auto-download: OFF',
        // Footer
        'footer.madeWith': 'Feito com',
        'footer.by': 'por',
        'footer.poweredBy': 'Powered by',
        // Favorites
        'gallery.favorites': 'Favoritos',
        'gallery.favorite': 'Favoritar',
        'gallery.unfavorite': 'Remover Favorito',
        'toast.addedToFavorites': 'Adicionado aos favoritos!',
        'toast.removedFromFavorites': 'Removido dos favoritos',
        'gallery.prev': '‚óÄ',  // Generic arrow, key kept for future text
        'gallery.next': '‚ñ∂',  // Generic arrow
        // Backup
        'settings.backupRestore': 'Backup & Restaura√ß√£o',
        'settings.export': 'Exportar Configura√ß√µes',
        'settings.import': 'Importar Configura√ß√µes',
        'settings.backupHint': 'Exporte suas configura√ß√µes para backup ou transfira para outro dispositivo',
        'toast.settingsExported': 'Configura√ß√µes exportadas!',
        'toast.settingsImported': 'Configura√ß√µes importadas!',
        'toast.importError': 'Erro ao importar configura√ß√µes',
        // Jobs
        'jobs.title': 'Fila de Jobs',
        'jobs.empty': 'Nenhum job na fila',
        'jobs.emptyHint': 'Gere imagens para ver jobs aqui',
        'jobs.active': 'ativo',
        'jobs.actives': 'ativos',
        'jobs.pending': 'pendente',
        'jobs.pendings': 'pendentes',
        'jobs.clearCompleted': 'Limpar conclu√≠dos',
        'jobs.cleared': 'Jobs limpos',
        'toast.jobAdded': 'Gerando imagem...',
        'toast.jobComplete': 'Imagem gerada!',
        'toast.jobFailed': 'Falha ao gerar',
        'toast.jobCancelled': 'Job cancelado',
        'toast.uploadingImage': 'Enviando imagem...',
        'toast.imageUploadFailed': 'Falha ao enviar imagem.',
        'jobs.blockedByFilter': 'Bloqueado (Filtro)',
        'jobs.retry': 'Tentando novamente ({current}/{max})',
        'toast.imagePasted': 'Imagem colada!',
        'toast.loadingImage': 'Carregando imagem...',
        // Recents
        'recents.title': 'Geradas recentemente',
        'recents.empty': 'Nenhuma gera√ß√£o recente',
        // Missing
        'gallery.noFavorites': 'Nenhum favorito ainda',
        'gallery.noFavoritesHint': 'Clique no ‚≠ê em uma imagem para adicionar aos favoritos',
        'gallery.noImages': 'Nenhuma imagem ainda',
        'gallery.noVideos': 'Nenhum v√≠deo ainda',
        'gallery.search': 'Buscar por prompt...', // Added
        'toast.selectImage': 'Selecione ao menos uma imagem',
        'toast.sentToEdit': 'Imagem enviada para edi√ß√£o',
        'toast.editReady': 'Imagem pronta para edi√ß√£o!',
        'toast.imageProcessError': 'Erro ao processar imagem: {error}',
        'error.resolutionTooHigh': 'Resolu√ß√£o muito alta para este modelo. Tente reduzir o tamanho.'
    },
    en: {
        // Setup Modal
        'setup.title': 'Welcome to Hibiscus',
        'setup.welcome': 'Set your language and API to get started',
        'setup.language': 'Language',
        'setup.apiKey': 'API Key',
        'setup.apiKeyHint': 'For higher limits, get one at enter.pollinations.ai',
        'setup.start': 'Start',
        // Navigation
        'nav.generateImage': 'Generate Image',
        'nav.editImage': 'Edit Image',
        'nav.generateVideo': 'Generate Video',
        'nav.gallery': 'Gallery',
        'nav.settings': 'Settings',
        // Image Generation
        'image.title': 'Image Generation',
        'image.subtitle': 'Create amazing images with AI',
        'image.prompt': 'Prompt',
        'image.promptPlaceholder': 'Describe the image you want to create...',
        'image.negativePrompt': 'Negative Prompt',
        'image.negativePromptPlaceholder': 'What to avoid in the image...',
        'image.model': 'Model',
        'image.quality': 'Quality (GPT Only)',
        'image.qualityLow': 'Low',
        'image.qualityMedium': 'Medium',
        'image.qualityHigh': 'High',
        'image.qualityHD': 'HD',
        'image.aspectRatio': 'Aspect Ratio',
        'image.width': 'Width',
        'image.height': 'Height',
        'image.seed': 'Seed',
        'image.seedRandom': '-1 for random',
        'image.guidance': 'Guidance Scale',
        'image.resolutionMultiplier': 'Resolution Multiplier',
        'image.resolutionWarning': '‚ö†Ô∏è Some models may not support this resolution',
        'image.resNormal': 'Normal Quality',
        'image.resHD': 'HD Quality (2x)',
        'image.resUltra': 'Ultra HD (4x)',
        'image.enhance': 'Enhance prompt with AI',
        'image.transparent': 'Transparent background (GPT Only)',
        'image.noLogo': 'No watermark',
        'image.safeFilter': 'Safety filter',
        'image.generate': 'Generate Image',
        'image.generating': 'Generating image...',
        'image.placeholder': 'Your image will appear here',
        // Image Editing
        'edit.title': 'Image Editing',
        'edit.subtitle': 'Modify existing images with AI (supports multiple images)',
        'edit.refImages': 'Reference Images (supports multiple)',
        'edit.urlPlaceholder': 'Paste URL and press Enter, or upload',
        'edit.hint': 'You can add multiple images. URLs are processed faster.',
        'edit.clearAll': '‚úï Clear All',
        'edit.promptLabel': 'Edit Prompt',
        'edit.promptPlaceholder': 'Describe the modifications you want to make...',
        'edit.apply': 'Apply Edit',
        'edit.applying': 'Applying edit...',
        'edit.placeholder': 'The edit result will appear here',
        'edit.continue': 'Continue Editing',
        // Video Generation
        'video.title': 'Video Generation',
        'video.subtitle': 'Create amazing videos with AI',
        'video.prompt': 'Prompt',
        'video.promptPlaceholder': 'Describe the video you want to create...',
        'video.model': 'Model',
        'video.refImage': 'Reference Image (Optional)',
        'video.refImagePlaceholder': 'Initial image URL (for Seedance)',
        'video.duration': 'Duration (seconds)',
        'video.seconds': 'seconds',
        'video.aspectRatio': 'Aspect Ratio',
        'video.landscape': 'Landscape',
        'video.portrait': 'Portrait',
        'video.audio': 'Generate audio (Veo only)',
        'video.enhance': 'Enhance prompt with AI',
        'video.generate': 'Generate Video',
        'video.generating': 'Generating video...',
        'video.generatingHint': 'This may take a few minutes',
        'video.placeholder': 'Your video will appear here',
        'video.placeholderHint': 'Videos may take a few minutes to generate',
        // Gallery
        'gallery.title': 'Gallery',
        'gallery.subtitle': 'Your creations organized by date',
        'gallery.all': 'All',
        'gallery.images': 'Images',
        'gallery.videos': 'Videos',
        'gallery.downloadAll': 'Download All',
        'gallery.clear': 'Clear',
        'gallery.empty': 'No creations yet',
        'gallery.emptyHint': 'Generate images or videos to see them here',
        'gallery.confirmClear': 'Are you sure you want to clear the entire gallery?',
        'gallery.confirmDelete': 'Are you sure you want to delete this item?',
        // Settings
        'settings.title': 'Settings',
        'settings.subtitle': 'Configure your experience',
        'settings.apiKey': 'API Key',
        'settings.apiKeyHint': 'Get your key at',
        'settings.saveKey': 'Save Key',
        'settings.autoDownload': 'Auto-Download',
        'settings.autoDownloadEnable': 'Enable automatic download',
        'settings.autoDownloadHint': 'Automatically downloads all creations',
        'settings.downloadPath': 'Download Folder',
        'settings.downloadPathHint': 'Subfolders will be created by date',
        'settings.filenameFormat': 'Filename Format',
        'settings.filenamePrompt': 'Shortened prompt',
        'settings.filenameTimestamp': 'Timestamp',
        'settings.filenameBoth': 'Prompt + Timestamp',
        'settings.mediaDir': 'Media Directory',
        'settings.useCustomDir': 'Use custom directory',
        'settings.mediaDirHint': 'By default, uses the app gallery folder',
        'settings.customDir': 'Custom Folder',
        'settings.browse': 'Browse',
        'settings.dirSelected': 'Directory selected',
        'settings.dirReset': 'Using default directory',
        'settings.language': 'Language',
        'settings.theme': 'Theme',
        'settings.themeDark': 'Dark',
        'settings.themeLight': 'Light',
        'settings.stats': 'Statistics',
        'settings.imagesGenerated': 'Images Generated',
        'settings.videosGenerated': 'Videos Generated',
        'settings.downloads': 'Downloads',
        'settings.logs': 'System Logs',
        'settings.logsRefresh': 'Refresh',
        'settings.logsExport': 'Export',
        'settings.logsClear': 'Clear',
        'settings.logsEmpty': 'No logs recorded',
        'settings.logsConfirmClear': 'Clear all logs?',
        'settings.logsAll': 'All',
        'settings.logsInfo': 'Info',
        'settings.logsWarn': 'Warnings',
        'settings.logsError': 'Errors',
        // Toasts & Messages
        'toast.safetyRetry': 'Safety filter triggered ({failures} failures). Attempt {current}... Wait or cancel.',
        'toast.safetyCancel': 'Generation cancelled by user',
        'toast.cancelled': 'Cancelled',
        'toast.safetySuccess': 'Image generated after {attempts} attempts!',
        'toast.serverError': 'Model {model} unavailable. Try another model.',
        'toast.safetyBlocked': 'Content blocked by safety filter.',
        // Job Queue
        'jobs.active': 'Active Generations',
        'jobs.pending': 'In queue',
        'jobs.running': 'Generating...',
        'jobs.retry': 'Retry {current}/{max}',
        'jobs.failed': 'Failed',
        'jobs.blockedByFilter': 'Blocked by filter',
        'error.serverUnavailable': 'Model {model} is currently unavailable. Try another model.',
        'error.serverGeneric': 'Server error. Please try again.',
        'error.safetyBlocked': 'Content blocked by safety filter.',
        'error.authRequired': 'Invalid or missing API key.',
        'error.insufficientBalance': 'Insufficient balance. Add credits at enter.pollinations.ai',
        'error.rateLimit': 'Too many requests. Please wait.',
        'error.timeout': 'Request timed out. Please try again.',
        'error.network': 'Connection error. Check your internet.',
        'toast.generating': 'Generating...',
        'toast.success': 'Success!',
        'toast.error': 'Error',
        'toast.networkError': 'Network error, retrying ({attempt}/{max})...',
        'toast.balanceError': 'Insufficient balance to use this model',
        'toast.balanceErrorHint': 'Add credits at enter.pollinations.ai to continue generating',
        'toast.authError': 'API Key required',
        'toast.authErrorHint': 'Enter your API key in Settings to use this model',
        'toast.dismissIn': 'Click anywhere or press any key to close ({seconds}s)',
        'toast.enterPrompt': 'Enter a prompt to generate',
        'toast.imageSuccess': 'Image generated successfully!',
        'toast.editSuccess': 'Edit applied successfully!',
        'toast.videoSuccess': 'Video generated successfully!',
        'toast.downloadSuccess': 'Download complete!',
        'toast.noImage': 'No image to download',
        'toast.noVideo': 'No video to download',
        'toast.uploadingImages': 'Uploading images...',
        'toast.provideImage': 'Provide at least one reference image',
        'toast.invalidUrl': 'Paste a valid URL (http/https)',
        'toast.imageError': 'Error generating image: {error}',
        'toast.editError': 'Error editing image: {error}',
        'toast.videoError': 'Error generating video: {error}',
        'toast.imageTooLarge': 'Image too large. Use a smaller image or provide a URL.',
        'toast.uploadingImage': 'Uploading image...',
        'toast.processingImage': 'Processing image {current}/{total}...',
        'toast.uploadServicesFailed': 'Upload failed. All services failed.',
        'toast.safetyRetriesExhausted': 'Failed after {max} safety filter attempts',
        'toast.noImageToUpload': 'No image to upload',
        'toast.imageUploadFailed': 'Failed to upload image. Use an external URL.',
        'toast.enterEditPrompt': 'Enter a prompt for the edit',
        'toast.enterVideoPrompt': 'Enter a prompt to generate the video',
        'toast.nothingToDownload': 'Nothing to download',
        'toast.allDownloaded': 'All items downloaded!',
        'toast.galleryCleared': 'Gallery cleared',
        'toast.onlyImagesEdit': 'Only images can be edited',
        'toast.loadImageError': 'Error loading image',
        'toast.fileNotAvailable': 'File not available',
        'toast.apiKeySaved': 'API Key saved!', // Updated
        'toast.logsExported': 'Logs exported!', // Updated
        'toast.logsCleared': 'Logs cleared', // Updated
        // Buttons
        'btn.cancel': 'Cancel', // Updated
        'btn.download': 'Download', // Updated
        'btn.edit': 'Edit', // Updated
        'btn.regenerate': 'Regenerate', // Updated
        'btn.upload': 'Upload', // Updated
        'btn.add': 'Add',
        'btn.delete': 'Delete', // Updated
        // Auto-download status
        'status.autoDownloadOn': 'Auto-download: ON',
        'status.autoDownloadOff': 'Auto-download: OFF',
        // Footer
        'footer.madeWith': 'Made with',
        'footer.by': 'by',
        'footer.poweredBy': 'Powered by',
        // Favorites
        'gallery.favorites': 'Favorites',
        'gallery.favorite': 'Favorite',
        'gallery.unfavorite': 'Remove Favorite',
        'toast.addedToFavorites': 'Added to favorites!',
        'toast.removedFromFavorites': 'Removed from favorites',
        'gallery.prev': '‚óÄ',
        'gallery.next': '‚ñ∂',
        // Backup
        'settings.backupRestore': 'Backup & Restore',
        'settings.export': 'Export Settings',
        'settings.import': 'Import Settings',
        'settings.backupHint': 'Export your settings for backup or transfer to another device',
        'toast.settingsExported': 'Settings exported!',
        'toast.settingsImported': 'Settings imported!',
        'toast.importError': 'Error importing settings',
        // Jobs
        'jobs.title': 'Jobs Queue',
        'jobs.empty': 'No jobs in queue',
        'jobs.emptyHint': 'Generate images to see jobs here',
        'jobs.active': 'active',
        'jobs.actives': 'active',
        'jobs.pending': 'pending',
        'jobs.pendings': 'pending',
        'jobs.clearCompleted': 'Clear completed',
        'jobs.cleared': 'Jobs cleared',
        'toast.jobAdded': 'Generating image...',
        'toast.jobComplete': 'Image generated!',
        'toast.jobFailed': 'Generation failed',
        'toast.jobCancelled': 'Job cancelled',
        'toast.uploadingImage': 'Uploading image...',
        'toast.imageUploadFailed': 'Failed to upload image.',
        'jobs.blockedByFilter': 'Blocked (Filter)',
        'jobs.retry': 'Retrying ({current}/{max})',
        'toast.imagePasted': 'Image pasted!',
        'toast.loadingImage': 'Loading image...',
        // Recents
        'recents.title': 'Recently generated',
        'recents.empty': 'No recent generations',
        // Missing
        'gallery.noFavorites': 'No favorites yet',
        'gallery.noFavoritesHint': 'Click ‚≠ê on an image to add to favorites',
        'gallery.noImages': 'No images yet',
        'gallery.noVideos': 'No videos yet',
        'gallery.search': 'Search by prompt...', // Added
        'toast.selectImage': 'Select at least one image',
        'toast.sentToEdit': 'Image sent to editor',
        'toast.editReady': 'Image ready for editing!',
        'toast.imageProcessError': 'Error processing image: {error}',
        'error.resolutionTooHigh': 'Resolution too high for this model. Try reducing the size.'
    },
    es: {
        // Setup Modal
        'setup.title': 'Bienvenido a Hibiscus',
        'setup.welcome': 'Configura tu idioma y API para empezar',
        'setup.language': 'Idioma',
        'setup.apiKey': 'Clave API',
        'setup.apiKeyHint': 'Para l√≠mites mayores, obt√©n una en enter.pollinations.ai',
        'setup.start': 'Empezar',
        // Navigation
        'nav.generateImage': 'Generar Imagen',
        'nav.editImage': 'Editar Imagen',
        'nav.generateVideo': 'Generar Video',
        'nav.gallery': 'Galer√≠a',
        'nav.settings': 'Configuraci√≥n',
        // Image Generation
        'image.title': 'Generaci√≥n de Im√°genes',
        'image.subtitle': 'Crea im√°genes incre√≠bles con IA',
        'image.prompt': 'Prompt',
        'image.promptPlaceholder': 'Describe la imagen que quieres crear...',
        'image.negativePrompt': 'Prompt Negativo',
        'image.negativePromptPlaceholder': 'Qu√© evitar en la imagen...',
        'image.model': 'Modelo',
        'image.quality': 'Calidad (solo GPT)', // Updated
        'image.qualityLow': 'Baja',
        'image.qualityMedium': 'Media',
        'image.qualityHigh': 'Alta',
        'image.qualityHD': 'HD',
        'image.aspectRatio': 'Proporci√≥n',
        'image.width': 'Ancho',
        'image.height': 'Alto',
        'image.seed': 'Seed',
        'image.seedRandom': '-1 para aleatorio',
        'image.guidance': 'Guidance Scale',
        'image.resolutionMultiplier': 'Multiplicador de Resoluci√≥n',
        'image.resolutionWarning': '‚ö†Ô∏è Algunos modelos pueden no soportar esta resoluci√≥n',
        'image.resNormal': 'Calidad Normal',
        'image.resHD': 'Calidad HD (2x)',
        'image.resUltra': 'Ultra HD (4x)',
        'image.enhance': 'Mejorar prompt con IA',
        'image.transparent': 'Fondo transparente (solo GPT)', // Updated
        'image.noLogo': 'Sin marca de agua',
        'image.safeFilter': 'Filtro de seguridad',
        'image.generate': 'Generar Imagen',
        'image.generating': 'Generando imagen...',
        'image.placeholder': 'Tu imagen aparecer√° aqu√≠',
        // Image Editing
        'edit.title': 'Edici√≥n de Im√°genes',
        'edit.subtitle': 'Modifica im√°genes existentes con IA (soporta m√∫ltiples im√°genes)',
        'edit.refImages': 'Im√°genes de Referencia (soporta m√∫ltiples)',
        'edit.urlPlaceholder': 'Pega URL y presiona Enter, o sube',
        'edit.hint': 'Puedes agregar varias im√°genes. Las URLs se procesan m√°s r√°pido.',
        'edit.clearAll': '‚úï Limpiar Todo',
        'edit.promptLabel': 'Prompt de Edici√≥n',
        'edit.promptPlaceholder': 'Describe las modificaciones que quieres hacer...',
        'edit.apply': 'Aplicar Edici√≥n',
        'edit.applying': 'Aplicando edici√≥n...',
        'edit.placeholder': 'El resultado de la edici√≥n aparecer√° aqu√≠',
        'edit.continue': 'Continuar Editando',
        // Video Generation
        'video.title': 'Generaci√≥n de Videos',
        'video.subtitle': 'Crea videos incre√≠bles con IA',
        'video.prompt': 'Prompt',
        'video.promptPlaceholder': 'Describe el video que quieres crear...',
        'video.model': 'Modelo',
        'video.refImage': 'Imagen de Referencia (Opcional)',
        'video.refImagePlaceholder': 'URL de imagen inicial (para Seedance)',
        'video.duration': 'Duraci√≥n (segundos)',
        'video.seconds': 'segundos',
        'video.aspectRatio': 'Proporci√≥n',
        'video.landscape': 'Paisaje',
        'video.portrait': 'Retrato',
        'video.audio': 'Generar audio (solo Veo)',
        'video.enhance': 'Mejorar prompt con IA',
        'video.generate': 'Generar Video',
        'video.generating': 'Generando video...',
        'video.generatingHint': 'Esto puede tardar unos minutos',
        'video.placeholder': 'Tu video aparecer√° aqu√≠',
        'video.placeholderHint': 'Los videos pueden tardar unos minutos en generarse',
        // Gallery
        'gallery.title': 'Galer√≠a',
        'gallery.subtitle': 'Tus creaciones organizadas por fecha',
        'gallery.all': 'Todos',
        'gallery.images': 'Im√°genes',
        'gallery.videos': 'Videos',
        'gallery.downloadAll': 'Descargar Todo',
        'gallery.clear': 'Limpiar',
        'gallery.empty': 'Sin creaciones a√∫n',
        'gallery.emptyHint': 'Genera im√°genes o videos para verlos aqu√≠',
        'gallery.confirmClear': '¬øEst√°s seguro de que quieres limpiar toda la galer√≠a?',
        'gallery.confirmDelete': '¬øEst√°s seguro de que quieres eliminar este elemento?',
        // Settings
        'settings.title': 'Configuraci√≥n',
        'settings.subtitle': 'Configura tu experiencia',
        'settings.apiKey': 'Clave API',
        'settings.apiKeyHint': 'Obt√©n tu clave en',
        'settings.saveKey': 'Guardar Clave',
        'settings.autoDownload': 'Auto-Descarga',
        'settings.autoDownloadEnable': 'Activar descarga autom√°tica',
        'settings.autoDownloadHint': 'Descarga autom√°ticamente todas las creaciones',
        'settings.downloadPath': 'Carpeta de Descarga',
        'settings.downloadPathHint': 'Las subcarpetas se crear√°n por fecha',
        'settings.filenameFormat': 'Formato del Nombre',
        'settings.filenamePrompt': 'Prompt resumido',
        'settings.filenameTimestamp': 'Timestamp',
        'settings.filenameBoth': 'Prompt + Timestamp',
        'settings.mediaDir': 'Directorio de Medios',
        'settings.useCustomDir': 'Usar directorio personalizado',
        'settings.mediaDirHint': 'Por defecto, usa la carpeta de galer√≠a de la app',
        'settings.customDir': 'Carpeta Personalizada',
        'settings.browse': 'Explorar',
        'settings.dirSelected': 'Directorio seleccionado',
        'settings.dirReset': 'Usando directorio predeterminado',
        'settings.language': 'Idioma',
        'settings.theme': 'Tema',
        'settings.themeDark': 'Oscuro',
        'settings.themeLight': 'Claro',
        'settings.stats': 'Estad√≠sticas',
        'settings.imagesGenerated': 'Im√°genes Generadas',
        'settings.videosGenerated': 'Videos Generados',
        'settings.downloads': 'Descargas',
        'settings.logs': 'Logs del Sistema',
        'settings.logsRefresh': 'Actualizar',
        'settings.logsExport': 'Exportar',
        'settings.logsClear': 'Limpiar',
        'settings.logsEmpty': 'Sin logs registrados',
        'settings.logsConfirmClear': '¬øLimpiar todos los logs?',
        'settings.logsAll': 'Todos',
        'settings.logsInfo': 'Info',
        'settings.logsWarn': 'Avisos',
        'settings.logsError': 'Errores',
        // Toasts & Messages
        'toast.safetyRetry': 'Filtro de seguridad detectado ({failures} fallos). Intento {current}... Espera o cancela.',
        'toast.safetyCancel': 'Generaci√≥n cancelada por el usuario',
        'toast.cancelled': 'Cancelado',
        'toast.safetySuccess': '¬°Imagen generada despu√©s de {attempts} intentos!',
        'toast.serverError': 'Modelo {model} no disponible. Prueba otro modelo.',
        'toast.safetyBlocked': 'Contenido bloqueado por el filtro de seguridad.',
        // Job Queue
        'jobs.active': 'Generaciones Activas',
        'jobs.pending': 'En cola',
        'jobs.running': 'Generando...',
        'jobs.retry': 'Reintento {current}/{max}',
        'jobs.failed': 'Fall√≥',
        'jobs.blockedByFilter': 'Bloqueado por el filtro',
        'error.serverUnavailable': 'Modelo {model} no disponible en este momento. Prueba otro modelo.',
        'error.serverGeneric': 'Error del servidor. Por favor intenta de nuevo.',
        'error.safetyBlocked': 'Contenido bloqueado por el filtro de seguridad.',
        'error.authRequired': 'Clave API inv√°lida o no configurada.',
        'error.insufficientBalance': 'Saldo insuficiente. A√±ade cr√©ditos en enter.pollinations.ai',
        'error.rateLimit': 'Demasiadas solicitudes. Por favor espera.',
        'error.timeout': 'Tiempo de espera agotado. Por favor intenta de nuevo.',
        'error.network': 'Error de conexi√≥n. Verifica tu internet.',
        'toast.generating': 'Generando...',
        'toast.success': '¬°√âxito!',
        'toast.error': 'Error',
        'toast.networkError': 'Error de red, reintentando ({attempt}/{max})...',
        'toast.balanceError': 'Saldo insuficiente para usar este modelo',
        'toast.balanceErrorHint': 'A√±ade cr√©ditos en enter.pollinations.ai para seguir generando',
        'toast.authError': 'Se requiere clave API',
        'toast.authErrorHint': 'Ingresa tu clave API en Configuraci√≥n para usar este modelo',
        'toast.dismissIn': 'Haz clic en cualquier lugar o presiona cualquier tecla para cerrar ({seconds}s)',
        'toast.enterPrompt': 'Ingresa un prompt para generar',
        'toast.imageSuccess': '¬°Imagen generada con √©xito!',
        'toast.editSuccess': '¬°Edici√≥n aplicada con √©xito!',
        'toast.videoSuccess': '¬°Video generado con √©xito!',
        'toast.downloadSuccess': '¬°Descarga completada!',
        'toast.noImage': 'Sin imagen para descargar',
        'toast.noVideo': 'Sin video para descargar',
        'toast.uploadingImages': 'Subiendo im√°genes...',
        'toast.provideImage': 'Proporciona al menos una imagen de referencia',
        'toast.invalidUrl': 'Pega una URL v√°lida (http/https)',
        'toast.imageError': 'Error al generar imagen: {error}',
        'toast.editError': 'Error al editar imagen: {error}',
        'toast.videoError': 'Error al generar video: {error}',
        'toast.imageTooLarge': 'Imagen muy grande. Usa una imagen m√°s peque√±a o proporciona una URL.',
        'toast.uploadingImage': 'Subiendo imagen...',
        'toast.processingImage': 'Procesando imagen {current}/{total}...',
        'toast.uploadServicesFailed': 'Error de subida. Todos los servicios fallaron.',
        'toast.safetyRetriesExhausted': 'Fall√≥ despu√©s de {max} intentos del filtro de seguridad',
        'toast.noImageToUpload': 'No hay imagen para subir',
        'toast.imageUploadFailed': 'Error al subir imagen. Usa una URL externa.',
        'toast.enterEditPrompt': 'Ingresa un prompt para la edici√≥n',
        'toast.enterVideoPrompt': 'Ingresa un prompt para generar el video',
        'toast.nothingToDownload': 'Nada para descargar',
        'toast.allDownloaded': '¬°Todos los elementos descargados!',
        'toast.galleryCleared': 'Galer√≠a limpiada',
        'toast.onlyImagesEdit': 'Solo las im√°genes pueden ser editadas',
        'toast.loadImageError': 'Error al cargar imagen',
        'toast.fileNotAvailable': 'Archivo no disponible',
        'toast.apiKeySaved': '¬°API Key guardada!',
        'toast.logsExported': '¬°Logs exportados!',
        'toast.logsCleared': 'Logs limpiados',
        // Buttons
        'btn.cancel': 'Cancelar',
        'btn.download': 'Descargar',
        'btn.edit': 'Editar',
        'btn.regenerate': 'Regenerar',
        'btn.upload': 'Subir',
        'btn.add': 'Agregar',
        'btn.delete': 'Eliminar',
        // Auto-download status
        'status.autoDownloadOn': 'Auto-descarga: ON',
        'status.autoDownloadOff': 'Auto-descarga: OFF',
        // Footer
        'footer.madeWith': 'Hecho con',
        'footer.by': 'por',
        'footer.poweredBy': 'Powered by',
        // Favorites
        'gallery.favorites': 'Favoritos',
        'gallery.favorite': 'Favorito',
        'gallery.unfavorite': 'Quitar Favorito',
        'toast.addedToFavorites': '¬°Agregado a favoritos!',
        'toast.removedFromFavorites': 'Eliminado de favoritos',
        'gallery.prev': '‚óÄ',
        'gallery.next': '‚ñ∂',
        // Backup
        'settings.backupRestore': 'Backup y Restauraci√≥n',
        'settings.export': 'Exportar Configuraci√≥n',
        'settings.import': 'Importar Configuraci√≥n',
        'settings.backupHint': 'Exporta tu configuraci√≥n para backup o transfiere a otro dispositivo',
        'toast.settingsExported': '¬°Configuraci√≥n exportada!',
        'toast.settingsImported': '¬°Configuraci√≥n importada!',
        'toast.importError': 'Error al importar configuraci√≥n',
        // Jobs
        'jobs.title': 'Cola de Jobs',
        'jobs.empty': 'Sin jobs en cola',
        'jobs.emptyHint': 'Genera im√°genes para ver jobs aqu√≠',
        'jobs.active': 'activo',
        'jobs.actives': 'activos',
        'jobs.pending': 'pendiente',
        'jobs.pendings': 'pendientes',
        'jobs.clearCompleted': 'Limpiar completados',
        'jobs.cleared': 'Jobs limpiados',
        'toast.jobAdded': 'Generando imagen...',
        'toast.jobComplete': '¬°Imagen generada!',
        'toast.jobFailed': 'Error al generar',
        'toast.jobCancelled': 'Job cancelado',
        // Recents
        'recents.title': 'Generadas recientemente',
        'recents.empty': 'Sin generaciones recientes',
        // Missing
        'gallery.noFavorites': 'Sin favoritos a√∫n',
        'gallery.noFavoritesHint': 'Haz clic en ‚≠ê en una imagen para a√±adir a favoritos',
        'gallery.noImages': 'Sin im√°genes a√∫n',
        'gallery.noVideos': 'Sin videos a√∫n',
        'gallery.search': 'Buscar por prompt...', // Added
        'toast.selectImage': 'Selecciona al menos una imagen',
        'toast.sentToEdit': 'Imagen enviada al editor',
        'toast.editReady': '¬°Imagen lista para editar!',
        'toast.imageProcessError': 'Error al procesar imagen: {error}',
        'error.resolutionTooHigh': 'Resoluci√≥n muy alta para este modelo. Intenta reducir el tama√±o.',
        'toast.uploadingImage': 'Subiendo imagen...',
        'toast.imageUploadFailed': 'Fallo al subir imagen.',
        'jobs.blockedByFilter': 'Bloqueado (Filtro)',
        'jobs.retry': 'Reintentando ({current}/{max})',
        'toast.imagePasted': '¬°Imagen pegada!',
        'toast.loadingImage': 'Cargando imagen...'
    }
};

/**
 * Sistema de internacionaliza√ß√£o
 */
const i18n = {
    current: 'pt',
    translations,

    /**
     * Obt√©m uma tradu√ß√£o pela chave
     * @param {string} key - Chave da tradu√ß√£o
     * @param {Object} params - Par√¢metros para substitui√ß√£o
     * @returns {string} Texto traduzido
     */
    t(key, params = {}) {
        let text = this.translations[this.current]?.[key] || this.translations['en']?.[key] || key;
        Object.entries(params).forEach(([k, v]) => {
            text = text.replace(`{${k}}`, v);
        });
        return text;
    },

    /**
     * Define o idioma atual
     * @param {string} lang - C√≥digo do idioma (pt, en, es)
     */
    setLanguage(lang) {
        this.current = lang;
        localStorage.setItem('language', lang);
        this.updateUI();
        window.dispatchEvent(new CustomEvent('languageChanged', { detail: { language: lang } }));
    },

    /**
     * Atualiza todos os elementos da UI com as tradu√ß√µes
     */
    updateUI() {
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            el.textContent = this.t(key);
        });
        document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
            const key = el.getAttribute('data-i18n-placeholder');
            el.placeholder = this.t(key);
        });
    },

    /**
     * Inicializa o idioma salvo ou detecta do navegador
     */
    init() {
        const saved = localStorage.getItem('language');
        if (saved && this.translations[saved]) {
            this.current = saved;
        } else {
            // Detecta idioma do navegador
            const browserLang = navigator.language?.substring(0, 2);
            if (this.translations[browserLang]) {
                this.current = browserLang;
            }
        }
    }
};

// Exp√µe globalmente para uso em scripts
window.i18n = i18n;
window.translations = translations;

